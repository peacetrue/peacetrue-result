{"version":3,"sources":["webpack://Peace.Result.Axios/webpack/universalModuleDefinition","webpack://Peace.Result.Axios/webpack/bootstrap","webpack://Peace.Result.Axios/./src/interceptor.js","webpack://Peace.Result.Axios/./src/structure.js","webpack://Peace.Result.Axios/./src/index.js","webpack://Peace.Result.Axios/external \"axios\"","webpack://Peace.Result.Axios/./src/param_stringify.js","webpack://Peace.Result.Axios/external {\"root\":\"Qs\",\"commonjs\":\"qs\",\"commonjs2\":\"qs\",\"amd\":\"qs\"}","webpack://Peace.Result.Axios/./src/standardized.js","webpack://Peace.Result.Axios/./src/client/network_error.js","webpack://Peace.Result.Axios/./src/client/timeout.js","webpack://Peace.Result.Axios/./src/client/url_not_exists.js","webpack://Peace.Result.Axios/./src/server/standard.js","webpack://Peace.Result.Axios/./src/server/spring_boot.js","webpack://Peace.Result.Axios/./src/server/success.js","webpack://Peace.Result.Axios/./src/prompt.js","webpack://Peace.Result.Axios/./src/reset.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__5__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Interceptor","[object Object]","wrapper","interceptorId","Map","inject","axios","eject","has","interceptors","response","delete","use","onFulfilled","onRejected","set","code","message","data","standardizedInterceptor","register","standardized","prompt","reset","Qs","paramsSerializer","params","stringify","arrayFormat","serializeDate","getTime","allowDots","skipNulls","transformRequest","headers","defaults","unshift","interceptor","push","promise","Promise","Error","Result","reject","startsWith","timeout","config","status","url","isStandard","resolve","timestamp","error","path","isSpringBoot","disableSuccessPrompt","dsp","successPrompt","alert","successMessage","disableFailurePrompt","dfp","failurePrompt","failureMessage","forEach","items","disableReset"],"mappings":"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","file":"peacetrue.result.axios.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"axios\"), require(\"qs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"axios\", \"qs\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Axios\"] = factory(require(\"axios\"), require(\"qs\"));\n\telse\n\t\troot[\"Peace\"] = root[\"Peace\"] || {}, root[\"Peace\"][\"Result\"] = root[\"Peace\"][\"Result\"] || {}, root[\"Peace\"][\"Result\"][\"Axios\"] = factory(root[\"axios\"], root[\"Qs\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__5__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","/**拦截器的结构*/\nclass Interceptor {\n    /**正常状态下的处理函数*/\n    onFulfilled(wrapper) {}\n\n    /**异常状态下的处理函数*/\n    onRejected(wrapper) {}\n}\n\n/** 注入到 axios 的拦截器中 */\nInterceptor.prototype.interceptorId = new Map();\nInterceptor.prototype.inject = function (axios, eject = false) {\n    if (eject === true) {\n        if (this.interceptorId.has(axios)) {\n            axios.interceptors.response.eject(this.interceptorId.get(axios));\n            this.interceptorId.delete(axios);\n        }\n    } else {\n        if (!this.interceptorId.has(axios)) {\n            const interceptorId = axios.interceptors.response.use(\n                Interceptor.prototype.onFulfilled === this.onFulfilled ? null : (wrapper) => this.onFulfilled(wrapper),\n                Interceptor.prototype.onRejected === this.onRejected ? null : (wrapper) => this.onRejected(wrapper)\n            );\n            this.interceptorId.set(axios, interceptorId);\n        }\n    }\n    return this;\n};\n\nmodule.exports = Interceptor;","class Result {\n\n    /**\n     * 响应数据标准\n     * @param {string|number} code 状态编码\n     * @param {string} message 状态描述\n     * @param {*} [data] 负载数据\n     */\n    constructor(code, message, data) {\n        this.code = code;\n        this.message = message;\n        this.data = data;\n    }\n}\n\nmodule.exports = Result;","let axios = require('axios');\n\nlet ParamStringify = require('./param_stringify');\nParamStringify.inject(axios);\n\nlet interceptors = {};\nlet standardizedInterceptor = require('./standardized');\nstandardizedInterceptor.register(require('./client/network_error'));\nstandardizedInterceptor.register(require('./client/timeout'));\nstandardizedInterceptor.register(require('./client/url_not_exists'));\nstandardizedInterceptor.register(require('./server/standard'));\nstandardizedInterceptor.register(require('./server/spring_boot'));\nstandardizedInterceptor.register(require('./server/success'));\ninterceptors.standardized = standardizedInterceptor.inject(axios);\ninterceptors.prompt = require('./prompt').inject(axios);\ninterceptors.reset = require('./reset').inject(axios);\n\nmodule.exports = {axios, interceptors};","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","let Qs = require('qs');\n\n/** 序列化参数，符合 spring mvc 数据绑定要求 */\nmodule.exports = {\n    /**处理url上的参数*/\n    paramsSerializer(params) {\n        return Qs.stringify(params, {arrayFormat: 'repeat', serializeDate: (d) => d.getTime(), allowDots: true, skipNulls: true,});\n    },\n    /**处理请求体中的参数*/\n    transformRequest(data, headers) {\n        return Qs.stringify(data, {arrayFormat: 'repeat', serializeDate: (d) => d.getTime(), allowDots: true, skipNulls: true,});\n    },\n    /**注入到axios中*/\n    inject(axios) {\n        axios.defaults.paramsSerializer = this.paramsSerializer;\n        axios.defaults.transformRequest.unshift(this.transformRequest);\n    }\n};","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","/*\n * 标准响应数据拦截器用于将综合数据上携带的非标准的响应数据标准化。\n * 标准化拦截器使用一组 子拦截器 处理综合数据，\n * 遇到第一个能够处理的 拦截器 后停止，\n * 如果没有找到能够处理的拦截器抛出异常。\n * 子拦截器必须将标准响应数据设置在综合数据的data属性上\n */\nlet Interceptor = require('./interceptor');\nlet interceptor = new Interceptor();\ninterceptor.interceptors = [];\n/**注册子拦截器*/\ninterceptor.register = function (interceptor) {\n    this.interceptors.push(interceptor);\n    return this;\n};\ninterceptor.onFulfilled = function (wrapper) {\n    for (let interceptor of this.interceptors) {\n        if (!interceptor.onFulfilled) continue;\n        let promise = interceptor.onFulfilled(wrapper);\n        if (promise instanceof Promise) return promise;\n    }\n    throw new Error(`没有可处理的 interceptor.onFulfilled`)\n};\n\ninterceptor.onRejected = function (wrapper) {\n    for (let interceptor of this.interceptors) {\n        if (!interceptor.onRejected) continue;\n        let promise = interceptor.onRejected(wrapper);\n        if (promise instanceof Promise) return promise;\n    }\n    throw new Error(`没有可处理的 interceptor.onRejected`)\n};\n\nmodule.exports = interceptor;","/* 处理 网络异常的 返回 */\nlet Interceptor = require('../interceptor');\nlet Result = require('../structure');\nlet interceptor = new Interceptor();\n\ninterceptor.onRejected = function (wrapper) {\n    if (wrapper.code === 'ECONNREFUSED'//NODE 环境\n        || wrapper.message === \"Network Error\"//浏览器环境\n    ) {\n        wrapper.data = new Result('network_error', '网络异常');\n        return Promise.reject(wrapper);\n    }\n};\n\nmodule.exports = interceptor;\n","/* 处理 请求超时的 返回 */\nlet Interceptor = require('../interceptor');\nlet Result = require('../structure');\nlet interceptor = new Interceptor();\n\ninterceptor.onRejected = function (wrapper) {\n    if (wrapper.message && wrapper.message.startsWith(\"timeout of \")) {\n        let timeout = wrapper.config.timeout / 1000;\n        wrapper.data = new Result('timeout', `请求时长已超过最大限制\\'${timeout}\\'秒`, {timeout: timeout});\n        return Promise.reject(wrapper);\n    }\n};\n\nmodule.exports = interceptor;","/* 处理响应状态码为404的返回 */\nlet Interceptor = require('../interceptor');\nlet Result = require('../structure');\nlet interceptor = new Interceptor();\ninterceptor.onRejected = function (wrapper) {\n    if (!wrapper.response) return;\n    //根据响应状态码判断\n    if (wrapper.response.status === 404) {\n        wrapper.data = new Result(\n            \"url_not_exists\",\n            `请求地址'${wrapper.config.url}'不存在`,\n            {url: wrapper.config.url}\n        );\n        return Promise.reject(wrapper);\n    }\n};\n\nmodule.exports = interceptor;","/*\n* 处理标准响应数据组件的返回。\n* 标准响应数据组件会返回标准的响应数据且始终使用200状态码\n*/\nlet Interceptor = require('../interceptor');\nlet interceptor = new Interceptor();\n\n/** 是否标准响应数据 */\nfunction isStandard(data) {\n    return data\n        && data.code\n        && data.message;\n}\n\ninterceptor.onFulfilled = function (wrapper) {\n    let data = wrapper.data;\n    if (!isStandard(data)) return;\n    if (data.code === 'success') {\n        //如果操作成功\n        return Promise.resolve(wrapper);\n    }\n    //如果操作失败\n    return Promise.reject(wrapper);\n};\n\nmodule.exports = interceptor;","/* 处理 spring-boot 的返回 */\nlet Interceptor = require('../interceptor');\nlet Result = require('../structure');\nlet interceptor = new Interceptor();\n\n/** 是否 spring-boot basic error controller 返回的数据格式*/\nfunction isSpringBoot(data) {\n    return data\n        && data.timestamp\n        && data.status\n        && data.error\n        && data.message\n        && data.path;\n}\n\ninterceptor.onRejected = function (wrapper) {\n    if (!wrapper.response) return;\n    let data = wrapper.response.data;\n    if (isSpringBoot(data)) {\n        //响应状态码作为标准响应数据的编码\n        wrapper.data = new Result(data.status, data.message);\n        return Promise.reject(wrapper);\n    }\n};\n\nmodule.exports = interceptor;","/* 处理 一般性正常的 返回 */\nlet Interceptor = require('../interceptor');\nlet Result = require('../structure');\nlet interceptor = new Interceptor();\n\ninterceptor.onFulfilled = function (wrapper) {\n    //此处无条件判断，必须位于子拦截器的末尾\n    wrapper.data = new Result('success', '操作成功!', wrapper.data);\n    return Promise.resolve(wrapper);\n};\n\nmodule.exports = interceptor;","/*\n* 默认提示拦截器，用于提供一种默认的提示方式。\n* 允许在请求时通过配置禁用默认提示。\n* 扩展配置：\n* disableSuccessPrompt：是否禁用成功提示，默认启用成功提示，简称：dsp\n* disableFailurePrompt：是否禁用异常提示，默认启用异常提示，简称：dfp\n*/\nlet Interceptor = require('./interceptor');\nlet interceptor = new Interceptor();\n\ninterceptor.onFulfilled = function (wrapper) {\n    //如果没有明确禁用成功提示\n    !(wrapper.disableSuccessPrompt === true || wrapper.dsp === true)\n    && this.successPrompt(wrapper);\n    return Promise.resolve(wrapper);\n};\n\n/**默认通过 alert 提示，实际使用中需重写此方法*/\ninterceptor.successPrompt = function (wrapper) {\n    alert(this.successMessage(wrapper));\n};\n\ninterceptor.successMessage = function (wrapper) {\n    return '操作成功';\n};\n\ninterceptor.onRejected = function (wrapper) {\n    //如果没有明确禁用失败提示\n    !(wrapper.disableFailurePrompt === true || wrapper.dfp === true)\n    && this.failurePrompt(wrapper);\n    return Promise.reject(wrapper);\n};\n\n/**默认通过 alert 提示，实际使用中需重写此方法*/\ninterceptor.failurePrompt = function (wrapper) {\n    alert(`操作失败!${this.failureMessage(wrapper)}`);\n};\n\ninterceptor.failureMessage = function (wrapper) {\n    let data = wrapper.data;\n    let message = data.message;\n    if (data.code === 'errors') {\n        data.data.forEach(items => {\n            message += \"<br>\" + items.message;\n        });\n    } else if (data.code === 'failure' && data.data) {\n        message += `(${data.data})`;\n    }\n    return message;\n};\n\nmodule.exports = interceptor;","/*\n* 重置综合数据\n* 扩展配置：\n* disableReset：是否禁用重置功能，默认启用重置功能\n*/\nlet Interceptor = require('./interceptor');\nlet interceptor = new Interceptor();\ninterceptor.onRejected = function (wrapper) {\n    //正常状态，使用负载数据作为参数\n    return Promise.resolve(wrapper.config.disableReset ? wrapper : wrapper.data.data);\n};\ninterceptor.onRejected = function (wrapper) {\n    //异常状态，使用标准响应数据作为参数\n    return Promise.reject(wrapper.config.disableReset ? wrapper : wrapper.data);\n};\n\nmodule.exports = interceptor;\n"],"sourceRoot":""}